<div id="main" ng-controller="homeController">
    <div id="top">
        <!--zoekbalk-->
        <div class="col-lg-6 col-md-6 col-sm-7 col-xs-7">
            <input type="text" ng-model="search" ng-change="searchChange()" class="form-control has-feedback" placeholder="Search" id="search"> <span class="glyphicon glyphicon-search form-control-feedback zoek"></span> </div>
        <div class="col-lg-6 col-md-6 col-sm-3 col-xs-3">
            <div class="col-lg-5 col-md-5 col-sm-6 col-xs-10 no-padding">
                <button class="btn btn-primary visible-lg visible-md" style="float:left; margin-left: 15px" ng-click="goToUpload()"> <span class="glyphicon glyphicon-cloud-upload" style="margin-right:5px;"></span>Upload</button>
                <button class="btn btn-primary visible-sm visible-xs" style="margin-left: 15px;" ng-click="goToUpload()"><span class="glyphicon glyphicon-cloud-upload"></span></button>
            </div>
            <div class="col-sm-6 col-xs-2 no-padding">
                <a class="dropdown-toggle visible-lg visible-md" type="button" data-toggle="dropdown" style="margin-top:7px;">
                    <label><span class="glyphicon glyphicon-user" style="margin-right:5px;"></span>{{user}} <span class="glyphicon glyphicon-triangle-bottom"></span></label>
                </a>
                <button class="btn btn-primary visible-sm visible-xs" style="margin-left: 15px;" data-toggle="dropdown"><span class="glyphicon glyphicon-user"></span></button>
                <ul class="dropdown-menu">
                    <li class="visible-sm visible-xs" style="margin-left: 15px;">{{user}}</li>
                    <hr  class="visible-sm visible-xs">                    
                    <li><a ng-click="ng-click=findDuplicates()"><span class="glyphicon glyphicon-duplicate"></span>Find Duplicates</a></li>
                    <li><a ng-click="deleteAllFiles()"><span class="glyphicon glyphicon-remove"></span>Delete All Files</a></li>
                    <hr>
                    <li><a ng-click="editUser()"><span class="glyphicon glyphicon-cog"></span>Settings</a></li>
                    <li><a ng-click="logOut()"><span class="glyphicon glyphicon-log-out"></span>Log out</a></li>
                </ul>
            </div>
        </div>
    </div>
    <div>
        <div id="layout" class="container-fluid">
            <div class="leftDiv">
                <button ng-click="grid()" class="btn btn-primary"> <span class="glyphicon glyphicon-th"></span></button>
                <button ng-click="list()" class="btn btn-primary"> <span class="glyphicon glyphicon-list"></span></button>
            </div>
            <div class="rightDiv">
                <div class="progress" style="margin-top:5px;">
                    <div class="progress-bar" role="progressbar" style="width:{{capacityBlueUsed}}%"> FREE ACCOUNT | {{capacityUsed}}% USED </div>
                    <div class="progress-bar progress-bar-danger" role="progressbar" style="width:{{capacityRedUsed}}%"></div>
                </div>
            </div>
        </div>
        <div>
            <h3>{{documentsMessage}}</h3></div>
        <div id="collection">
            <div ng-hide="searching">
                <div ng-repeat="pdfItem in fileList" class="collectionItem gridItem" ng-click="showFile(pdfItem)"> <img ng-src="{{pdfItem.thumbnail}}" style="margin-top: 5px;">
                    <h4><span class="glyphicon glyphicon-link" ng-show="pdfItem.links != ''"></span>{{pdfItem.customfilename}}
                </h4>
                    <a> <span class="glyphicon glyphicon-cloud-download" style="font-size: 32px;" ng-click="downloadFile(pdfItem); $event.stopPropagation();" title="Download file"></span></a>
                    <a> <span class="glyphicon glyphicon-pencil" style="font-size: 32px;" ng-click="editFile(pdfItem); $event.stopPropagation();" title="Edit {{pdfItem.name}}"></span></a>
                    <a> <span class="glyphicon glyphicon-remove red" style="font-size: 32px;" ng-click="deleteFile(pdfItem.name); $event.stopPropagation();" title="Delete file"></span></a>
                </div>
            </div>
            <div ng-hide="nsName" class="col-md-12 col-xs-12">
                <h2>Name</h2>
                <div ng-repeat="pdfItem in sortedNameList" class="collectionItem gridItem" ng-click="showFile(pdfItem)"> <img ng-src="{{pdfItem.thumbnail}}" style="margin-top: 5px;">
                    <h4><span class="glyphicon glyphicon-link" ng-show="pdfItem.links != ''"></span>{{pdfItem.customfilename}}
                </h4>
                    <a> <span class="glyphicon glyphicon-cloud-download" style="font-size: 32px;" ng-click="downloadFile(pdfItem); $event.stopPropagation();" title="Download file"></span></a>
                    <a> <span class="glyphicon glyphicon-pencil" style="font-size: 32px;" ng-click="editFile(pdfItem); $event.stopPropagation();" title="Edit {{pdfItem.name}}"></span></a>
                    <a> <span class="glyphicon glyphicon-remove red" style="font-size: 32px;" ng-click="deleteFile(pdfItem.name); $event.stopPropagation();" title="Delete file"></span></a>
                </div>
            </div>
            <div ng-hide="nsTag" class="col-md-12 col-xs-12">
                <h2>Tag</h2>
                <div ng-repeat="pdfItem in sortedTagList" class="collectionItem gridItem" ng-click="showFile(pdfItem)"> <img ng-src="{{pdfItem.thumbnail}}" style="margin-top: 5px;">
                    <h4><span class="glyphicon glyphicon-link" ng-show="pdfItem.links != ''"></span>{{pdfItem.customfilename}}
                </h4>
                    <a> <span class="glyphicon glyphicon-cloud-download" style="font-size: 32px;" ng-click="downloadFile(pdfItem); $event.stopPropagation();" title="Download file"></span></a>
                    <a> <span class="glyphicon glyphicon-pencil" style="font-size: 32px;" ng-click="editFile(pdfItem); $event.stopPropagation();" title="Edit {{pdfItem.name}}"></span></a>
                    <a> <span class="glyphicon glyphicon-remove red" style="font-size: 32px;" ng-click="deleteFile(pdfItem.name); $event.stopPropagation();" title="Delete file"></span></a>
                </div>
            </div>
            <div ng-hide="nsDate" class="col-md-12 col-xs-12">
                <h2>Date</h2>
                <div ng-repeat="pdfItem in sortedDateList" class="collectionItem gridItem" ng-click="showFile(pdfItem)"> <img ng-src="{{pdfItem.thumbnail}}" style="margin-top: 5px;">
                    <h4><span class="glyphicon glyphicon-link" ng-show="pdfItem.links != ''"></span>{{pdfItem.customfilename}}
                </h4>
                    <a> <span class="glyphicon glyphicon-cloud-download" style="font-size: 32px;" ng-click="downloadFile(pdfItem); $event.stopPropagation();" title="Download file"></span></a>
                    <a> <span class="glyphicon glyphicon-pencil" style="font-size: 32px;" ng-click="editFile(pdfItem); $event.stopPropagation();" title="Edit {{pdfItem.name}}"></span></a>
                    <a> <span class="glyphicon glyphicon-remove red" style="font-size: 32px;" ng-click="deleteFile(pdfItem.name); $event.stopPropagation();" title="Delete file"></span></a>
                </div>
            </div>
            <div ng-hide="nsContent" class="col-md-12 col-xs-12">
                <h2>Content</h2>
                <div ng-repeat="pdfItem in sortedContentList" class="collectionItem gridItem" ng-click="showFile(pdfItem)"> <img ng-src="{{pdfItem.thumbnail}}" style="margin-top: 5px;">
                    <h4><span class="glyphicon glyphicon-link" ng-show="pdfItem.links != ''"></span>{{pdfItem.customfilename}}
                </h4>
                    <a> <span class="glyphicon glyphicon-cloud-download" style="font-size: 32px;" ng-click="downloadFile(pdfItem); $event.stopPropagation();" title="Download file"></span></a>
                    <a> <span class="glyphicon glyphicon-pencil" style="font-size: 32px;" ng-click="editFile(pdfItem); $event.stopPropagation();" title="Edit {{pdfItem.name}}"></span></a>
                    <a> <span class="glyphicon glyphicon-remove red" style="font-size: 32px;" ng-click="deleteFile(pdfItem.name); $event.stopPropagation();" title="Delete file"></span></a>
                </div>
            </div>
        </div>
        <div id="collectionsList">
            <div ng-hide="searching">
                <table>
                    <tr class="bold">
                        <th ng-click="sortBy('filetype')">Type</th>
                        <th ng-click="sortBy('customfilename')">Title</th>
                        <th ng-click="sortBy('tags')">Tags</th>
                        <th ng-click="sortBy('date')">Date</th>
                        <th ng-click="sortBy('size')">Size</th>
                        <th>Actions</th>
                    </tr>
                    <tr ng-repeat="pdfItem in fileList | orderBy:propertyName:reverse" ng-click="showFile(pdfItem)">
                        <th> {{pdfItem.filetype}} </th>
                        <th> <span class="glyphicon glyphicon-link" ng-show="pdfItem.links != ''"></span> {{pdfItem.customfilename}} </th>
                        <th> {{pdfItem.tags}} </th>
                        <th> {{pdfItem.date}} </th>
                        <th> {{pdfItem.humansize}} </th>
                        <th>
                            <a> <span class="glyphicon glyphicon-remove red " style="font-size: 20px; float:right; margin-left: 15px;" ng-click="deleteFile(pdfItem.name); $event.stopPropagation();" title="Delete {{pdfItem.name}}"></span></a>
                            <a> <span class="glyphicon glyphicon-pencil" style="font-size: 20px; float:right; margin-left: 15px;" ng-click="editFile(pdfItem); $event.stopPropagation();" title="Edit {{pdfItem.name}}"></span></a>
                            <a> <span class="glyphicon glyphicon-cloud-download" style="font-size: 20px; float:right" ng-click="downloadFile(pdfItem); $event.stopPropagation();" title="Download {{pdfItem.name}}"></span></a>
                        </th>
                    </tr>
                </table>
            </div>
            <div ng-hide="nsName || nsTag || nsDate || nsContent">
                <div id="homeShow">
                    <table>
                        <tr class="bold">
                            <th>Type</th>
                            <th>Title</th>
                            <th>Tags</th>
                            <th>Date</th>
                            <th>Size</th>
                            <th>Actions</th>
                        </tr>
                    </table>
                </div>
            </div>
            <div ng-hide="nsName">
                <table>
                    <h2>Name</h2>
                    <tr ng-repeat="pdfItem in sortedNameList" ng-click="showFile(pdfItem)">
                        <th> {{pdfItem.filetype}} </th>
                        <th> <span class="glyphicon glyphicon-link" ng-show="pdfItem.links != ''"></span> {{pdfItem.customfilename}} </th>
                        <th> {{pdfItem.tags}} </th>
                        <th> {{pdfItem.date}} </th>
                        <th> {{pdfItem.humansize}} </th>
                        <th>
                            <a> <span class="glyphicon glyphicon-remove red " style="font-size: 20px; float:right; margin-left: 15px;" ng-click="deleteFile(pdfItem.name); $event.stopPropagation();" title="Delete file"></span></a>
                            <a> <span class="glyphicon glyphicon-pencil" style="font-size: 20px; float:right; margin-left: 15px;" ng-click="editFile(pdfItem); $event.stopPropagation();" title="Edit {{pdfItem.name}}"></span></a>
                            <a> <span class="glyphicon glyphicon-cloud-download" style="font-size: 20px; float:right" ng-click="downloadFile(pdfItem); $event.stopPropagation();" title="Download file"></span></a>
                        </th>
                    </tr>
                </table>
            </div>
            <div ng-hide="nsTag">
                <h2>Tag</h2>
                <div id="homeShow">
                    <table>
                        <tr ng-repeat="pdfItem in sortedTagList" ng-click="showFile(pdfItem)">
                            <th> {{pdfItem.filetype}} </th>
                            <th> <span class="glyphicon glyphicon-link" ng-show="pdfItem.links != ''"></span> {{pdfItem.customfilename}} </th>
                            <th> {{pdfItem.tags}} </th>
                            <th> {{pdfItem.date}} </th>
                            <th> {{pdfItem.humansize}} </th>
                            <th>
                                <a> <span class="glyphicon glyphicon-remove red " style="font-size: 20px; float:right; margin-left: 15px;" ng-click="deleteFile(pdfItem.name); $event.stopPropagation();" title="Delete file"></span></a>
                                <a> <span class="glyphicon glyphicon-pencil" style="font-size: 20px; float:right; margin-left: 15px;" ng-click="editFile(pdfItem); $event.stopPropagation();" title="Edit {{pdfItem.name}}"></span></a>
                                <a> <span class="glyphicon glyphicon-cloud-download" style="font-size: 20px; float:right" ng-click="downloadFile(pdfItem); $event.stopPropagation();" title="Download file"></span></a>
                            </th>
                        </tr>
                    </table>
                </div>
            </div>
            <div ng-hide="nsDate">
                <h2>Date</h2>
                <div id="homeShow">
                    <table>
                        <tr ng-repeat="pdfItem in sortedDateList" ng-click="showFile(pdfItem)">
                            <th> {{pdfItem.filetype}} </th>
                            <th> <span class="glyphicon glyphicon-link" ng-show="pdfItem.links != ''"></span> {{pdfItem.customfilename}} </th>
                            <th> {{pdfItem.tags}} </th>
                            <th> {{pdfItem.date}} </th>
                            <th> {{pdfItem.humansize}} </th>
                            <th>
                                <a> <span class="glyphicon glyphicon-remove red " style="font-size: 20px; float:right; margin-left: 15px;" ng-click="deleteFile(pdfItem.name); $event.stopPropagation();" title="Delete file"></span></a>
                                <a> <span class="glyphicon glyphicon-pencil" style="font-size: 20px; float:right; margin-left: 15px;" ng-click="editFile(pdfItem); $event.stopPropagation();" title="Edit {{pdfItem.name}}"></span></a>
                                <a> <span class="glyphicon glyphicon-cloud-download" style="font-size: 20px; float:right" ng-click="downloadFile(pdfItem); $event.stopPropagation();" title="Download file"></span></a>
                            </th>
                        </tr>
                    </table>
                </div>
            </div>
            <div ng-hide="nsContent">
                <h2>Content</h2>
                <div id="homeShow">
                    <table>
                        <tr ng-repeat="pdfItem in sortedContentList" ng-click="showFile(pdfItem)">
                            <th> {{pdfItem.filetype}} </th>
                            <th> <span class="glyphicon glyphicon-link" ng-show="pdfItem.links != ''"></span> {{pdfItem.customfilename}} </th>
                            <th> {{pdfItem.tags}} </th>
                            <th> {{pdfItem.date}} </th>
                            <th> {{pdfItem.humansize}} </th>
                            <th>
                                <a> <span class="glyphicon glyphicon-remove red " style="font-size: 20px; float:right; margin-left: 15px;" ng-click="deleteFile(pdfItem.name); $event.stopPropagation();" title="Delete file"></span></a>
                                <a> <span class="glyphicon glyphicon-pencil" style="font-size: 20px; float:right; margin-left: 15px;" ng-click="editFile(pdfItem); $event.stopPropagation();" title="Edit {{pdfItem.name}}"></span></a>
                                <a> <span class="glyphicon glyphicon-cloud-download" style="font-size: 20px; float:right" ng-click="downloadFile(pdfItem); $event.stopPropagation();" title="Download file"></span></a>
                            </th>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="form-content" style="display:none;">
        <form class="form" role="form">
            <div class="form-group">
                <label for="customFilename">Custom Filename</label>
                <input class="form-control" id="editCustomFilename" name="editCustomFilename"> </div>
            <div class="form-group">
                <label for="password">Tags</label>
                <input class="form-control" id="editTags" name="editTags"> </div>
        </form>
    </div>
    <div id="editUserForm" style="display:none;">
        <form class="userForm" role="userForm">
            <div class="form-group">
                <h2>Password settings</h2>
                <label for="oldPassword">Old password</label>
                <input type="password" class="form-control" id="oldPassword" name="oldPassword">
                <label for="newPassword">New password</label>
                <input type="password" class="form-control" id="newPassword" name="newPassword">
                <label for="confirmNewPassword">Confirm new password</label>
                <input type="password" class="form-control" id="confirmNewPassword" name="confirmNewPassword"> </div>
            <hr>
            <div class="form-group">
                <h2>Account settings</h2>
                <label for="premium">Premium user</label>
                <input type="checkbox" ng-checked="premium" id="premium" name="premium"> </div>
            <h2 class="green" ng-show="userSavedSuccess">Settings saved successfully.</h2>
        </form>
    </div>
    
    <div class="duplicatesPopup show-animation" ng-show="duplicatesFound && !doNotShowDuplicatesPopup" ng-click="findDuplicates()">
        <span class="glyphicon glyphicon-remove float-right white" ng-click="duplicatesFound = false; $event.stopPropagation()"></span>
    <p>We noticed there might be some duplicate files in your collection. Click here to take a look at them.</p>
        <p><input type="checkbox" ng-click="doNotShowDumplicatePopup(); $event.stopPropagation()"> Don't show this again.</p>
    </div>
</div>